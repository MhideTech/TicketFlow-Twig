<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>{% block title %}TicketFlow{% endblock %}</title>

  {# Tailwind CSS #}
  <link rel="stylesheet" href="/assets/css/tailwind.css">

  {# Google Fonts #}
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500;600;700&display=swap" rel="stylesheet">

  {% block head_extra %}{% endblock %}
</head>
<body class="bg-background text-foreground min-h-screen flex flex-col">

  {% if app.user is defined and app.user %}
    {# ===== AUTHENTICATED LAYOUT ===== #}
    <div class="flex h-screen bg-background">
      <div class="flex-1 flex flex-col overflow-hidden">
        {% include 'components/navbar.twig' %}
        <main class="flex-1 overflow-x-hidden overflow-y-auto">
          {{ block('content') }}
        </main>
      </div>
    </div>
  {% else %}
    {# ===== PUBLIC LAYOUT ===== #}
    {% include 'components/navbar.twig' %}
    <main class="flex-grow">
      {{ block('content') }}
    </main>
    {% include 'components/footer.twig' %}
  {% endif %}

  {# Toast Container #}
  <div id="toast-container" class="fixed bottom-4 right-4 z-[999999999] w-72"></div>

  {# Scripts #}
  <script src="/assets/js/toast.js"></script>
  <script src="/assets/js/validation.js"></script>

  {% if app.request is defined and app.request.attributes.get('_route') starts with 'dashboard' %}
    <script src="/assets/js/dashboard.js"></script>
  {% endif %}

  {% block javascript_extra %}{% endblock %}

  <script src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js" defer></script>
</body>
</html>
